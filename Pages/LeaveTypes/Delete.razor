@page "/leave-types/delete/{Id:int}"
@inject ILeaveTypeService LeaveTypeService
@inject NavigationManager Navigation
@using HRMS.UI.Models.HRP

<h3>Delete Leave Type</h3>

@if (leaveType == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <div class="alert alert-warning">
        <p>Are you sure you want to delete the following leave type?</p>

        <ul>
            <li><strong>Name:</strong> @leaveType.Name</li>
            <li><strong>Description:</strong> @leaveType.Description</li>
            <li><strong>Is Paid:</strong> @(leaveType.IsPaid ? "Yes" : "No")</li>
            <li><strong>Is Active:</strong> @(leaveType.IsActive ? "Yes" : "No")</li>
        </ul>

        <button class="btn btn-danger" @onclick="DeleteLeaveType">Delete</button>
            <button type="button" class="btn btn-secondary" @onclick="Cancel">Cancel</button>
    </div>
}

@code {
    [Parameter]
    public int Id { get; set; }

    private HRP_LeaveType leaveType;

    protected override async Task OnInitializedAsync()
    {
        leaveType = await LeaveTypeService.GetByIdAsync(Id);
        if (leaveType == null)
        {
            Navigation.NavigateTo("/leave-types"); // Redirect if not found
        }
    }

    private async Task DeleteLeaveType()
    {
        await LeaveTypeService.DeleteAsync(Id);
        Navigation.NavigateTo("/leave-types");
    }

    private void Cancel()
    {
        Navigation.NavigateTo("/leave-types");
    }
}
